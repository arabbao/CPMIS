28-Jan-2022 08:34:45.467 嚴重 [http-nio-8080-exec-8] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jsp] in context with path [] threw exception [An exception occurred processing [/test1/time.jsp] at line [80]

77: 
78: 
79: ResultSet rc =stmtc.executeQuery("SELECT * FROM (SELECT PDLINE_NAME,sum(PASS_QTY+REPASS_QTY+REFAIL_QTY +FAIL_QTY)as input,sum(PASS_QTY+REPASS_QTY)as good,CONCAT(round(SUM(PASS_QTY+REPASS_QTY)/(sum(PASS_QTY+REPASS_QTY+REFAIL_QTY +FAIL_QTY))*100,3),'%')as Yield from(select * from sajet.G_SN_COUNT a  LEFT join sajet.SYS_PROCESS b  on a.process_id = b.process_id LEFT join sajet.SYS_PDLINE c  on a.PDLINE_ID = c.PDLINE_ID LEFT join sajet.G_WO_BASE d  on a.WORK_ORDER = d.WORK_ORDER WHERE a.WORK_DATE ='"+datetime+"' )GROUP BY PDLINE_NAME ORDER BY GOOD DESC ) WHERE ROWNUM <= 10");
80: ResultSet rb =cc.executeQuery("SELECT distinct Defect_Code 涓嶈壇浠ｇ爜,Defect_Desc 涓嶈壇鎻忚堪, SUMCOUNT 鏁伴噺 FROM (SELECT F.Defect_Code , F.Defect_Desc ,SUM (A.DEFECT_QTY) SUMCOUNT FROM SAJET.G_SN_DEFECT A, SAJET.SYS_DEFECT F WHERE 1=1 and  A.REC_TIME >= (SYSDATE - 225)AND A.REC_TIME <  (SYSDATE) AND A.DEFECT_ID = F.DEFECT_ID AND  A.REC_TIME BETWEEN TRUNC(SYSDATE) + 08/24 and TRUNC(SYSDATE) + 20/24) GROUP BY F.Defect_Code, F.Defect_Desc ORDER BY 3 DESC)WHERE ROWNUM <= 10");
81: ResultSet rf=dd.executeQuery("SELECT distinct Defect_Code 涓嶈壇浠ｇ爜,Defect_Desc 涓嶈壇鎻忚堪, SUMCOUNT 鏁伴噺 FROM (SELECT F.Defect_Code , F.Defect_Desc ,SUM (A.DEFECT_QTY) SUMCOUNT FROM SAJET.G_SN_DEFECT A, SAJET.SYS_DEFECT F WHERE 1=1 and  A.REC_TIME >= (SYSDATE - 225)AND A.REC_TIME <  (SYSDATE) AND A.DEFECT_ID = F.DEFECT_ID AND  A.REC_TIME BETWEEN TRUNC(SYSDATE) + 20/24) and TRUNC(SYSDATE+1) + 08/24) GROUP BY F.Defect_Code, F.Defect_Desc ORDER BY 3 DESC)WHERE ROWNUM <= 10");
82: %>
83: 


Stacktrace:] with root cause
	java.sql.SQLException: ORA-00933: SQL 命令的結束有問題

		at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:111)
		at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:330)
		at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:287)
		at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:742)
		at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:206)
		at oracle.jdbc.driver.T4CStatement.executeForDescribe(T4CStatement.java:789)
		at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1030)
		at oracle.jdbc.driver.T4CStatement.executeMaybeDescribe(T4CStatement.java:829)
		at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1123)
		at oracle.jdbc.driver.OracleStatement.executeQuery(OracleStatement.java:1263)
		at org.apache.jsp.test1.time_jsp._jspService(time_jsp.java:194)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:465)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:383)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:331)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:196)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1673)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
		at java.lang.Thread.run(Unknown Source)
28-Jan-2022 13:16:52.450 嚴重 [http-nio-8080-exec-1] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jsp] in context with path [] threw exception [An exception occurred processing [/test1/time.jsp] at line [75]

72: String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/"; 
73: String name = request.getParameter("time");//鐢╮equest寰楀埌 
74: String datetime = new SimpleDateFormat("yyyyMMdd").format(Calendar.getInstance().getTime());
75: ResultSet rs =stmt.executeQuery("SELECT PROCESS_NAME,sum(LED_TP1) LED_TP1,sum(LED_W10) LED_W10,sum(LED_W16) LED_W16,sum(LED_W01) LED_W01,sum(LED_L05) LED_L05,sum(LED_S01) LED_S01,sum(LED_S02) LED_S02,sum(LED_L08) LED_L08,sum(LED_L04) LED_L04,sum(LED_L02) LED_L02,sum(LED_L09) LED_L09,sum(LED_TP2) LED_TP2,sum(LED_W03) LED_W03,sum(LED_L03) LED_L03,sum(LED_W07) LED_W07,sum(LED_W08) LED_W08,sum(LED_S05) LED_S05,sum(LED_W05) LED_W05,sum(LED_W04) LED_W04,sum(LED_TP3) LED_TP3,sum(LED_S99) LED_S99,sum(LED_W02) LED_W02,sum(LED_S04) LED_S04,sum(LED_S03) LED_S03,sum(LED_W09) LED_W09,sum(LED_L01) LED_L01,sum(LED_L07) LED_L07,sum(LED_W11) LED_W11,sum(LED_L99) LED_L99,sum(LED_W12) LED_W12,sum(LED_S06) LED_S06,sum(LED_W06) LED_W06,sum(LED_L06) LED_L06 from(SELECT PDLINE_NAME,PROCESS_NAME, decode(PDLINE_NAME,'LED_TP1',nvl(INPUT_QTY,0)) LED_TP1,decode(PDLINE_NAME,'LED_W10',nvl(INPUT_QTY,0)) LED_W10,decode(PDLINE_NAME,'LED_W16',nvl(INPUT_QTY,0)) LED_W16 ,decode(PDLINE_NAME,'LED_W01',INPUT_QTY) LED_W01 ,decode(PDLINE_NAME,'LED_L05',INPUT_QTY) LED_L05,decode(PDLINE_NAME,'LED_S01',INPUT_QTY) LED_S01,decode(PDLINE_NAME,'LED_S02',nvl(INPUT_QTY,0)) LED_S02 ,decode(PDLINE_NAME,'LED_L02',nvl(INPUT_QTY,0)) LED_L02 ,decode(PDLINE_NAME,'LED_L08',nvl(INPUT_QTY,0)) LED_L08 ,decode(PDLINE_NAME,'LED_L04',nvl(INPUT_QTY,0)) LED_L04 ,decode(PDLINE_NAME,'LED_L09',nvl(INPUT_QTY,0)) LED_L09,decode(PDLINE_NAME,'LED_TP2',nvl(INPUT_QTY,0)) LED_TP2,decode(PDLINE_NAME,'LED_W03',nvl(INPUT_QTY,0)) LED_W03 ,decode(PDLINE_NAME,'LED_L03',nvl(INPUT_QTY,0)) LED_L03 ,decode(PDLINE_NAME,'LED_W07',nvl(INPUT_QTY,0)) LED_W07,decode(PDLINE_NAME,'LED_W08',nvl(INPUT_QTY,0)) LED_W08,decode(PDLINE_NAME,'LED_S05',nvl(INPUT_QTY,0)) LED_S05 ,decode(PDLINE_NAME,'LED_W05',nvl(INPUT_QTY,0)) LED_W05 ,decode(PDLINE_NAME,'LED_W04',nvl(INPUT_QTY,0)) LED_W04 ,decode(PDLINE_NAME,'LED_TP3',nvl(INPUT_QTY,0)) LED_TP3 ,decode(PDLINE_NAME,'LED_S99',nvl(INPUT_QTY,0)) LED_S99,decode(PDLINE_NAME,'LED_W02',nvl(INPUT_QTY,0)) LED_W02,decode(PDLINE_NAME,'LED_S04',nvl(INPUT_QTY,0)) LED_S04 ,decode(PDLINE_NAME,'LED_S03',INPUT_QTY) LED_S03 ,decode(PDLINE_NAME,'LED_W09',nvl(INPUT_QTY,0)) LED_W09,decode(PDLINE_NAME,'LED_L01',nvl(INPUT_QTY,0)) LED_L01,decode(PDLINE_NAME,'LED_L07',INPUT_QTY) LED_L07 ,decode(PDLINE_NAME,'LED_W11',nvl(INPUT_QTY,0)) LED_W11 ,decode(PDLINE_NAME,'LED_L99',nvl(INPUT_QTY,0)) LED_L99 ,decode(PDLINE_NAME,'LED_W12',nvl(INPUT_QTY,0)) LED_W12 ,decode(PDLINE_NAME,'LED_S06',nvl(INPUT_QTY,0)) LED_S06 ,decode(PDLINE_NAME,'LED_W06',nvl(INPUT_QTY,0)) LED_W06 ,decode(PDLINE_NAME,'LED_L06',nvl(INPUT_QTY,0)) LED_L06 from sajet.G_SN_COUNT a LEFT join sajet.SYS_PROCESS b  on a.process_id = b.process_id LEFT join sajet.SYS_PDLINE c  on a.PDLINE_ID = c.PDLINE_ID LEFT join sajet.G_WO_BASE  d  on a.WORK_ORDER = d.WORK_ORDER  WHERE a.WORK_DATE='"+datetime+"' AND INPUT_QTY isnotnull )GROUP BY PROCESS_NAME");
76: 
77: 
78: 


Stacktrace:] with root cause
	java.sql.SQLException: ORA-00920: 關係運算子無效

		at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:111)
		at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:330)
		at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:287)
		at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:742)
		at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:206)
		at oracle.jdbc.driver.T4CStatement.executeForDescribe(T4CStatement.java:789)
		at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1030)
		at oracle.jdbc.driver.T4CStatement.executeMaybeDescribe(T4CStatement.java:829)
		at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1123)
		at oracle.jdbc.driver.OracleStatement.executeQuery(OracleStatement.java:1263)
		at org.apache.jsp.test1.time_jsp._jspService(time_jsp.java:189)
		at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
		at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:465)
		at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:383)
		at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:331)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:196)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1673)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
		at java.lang.Thread.run(Unknown Source)
28-Jan-2022 15:11:31.295 資訊 [localhost-startStop-2] org.apache.catalina.core.ApplicationContext.log SessionListener: contextDestroyed()
28-Jan-2022 15:11:31.295 資訊 [localhost-startStop-2] org.apache.catalina.core.ApplicationContext.log ContextListener: contextDestroyed()
28-Jan-2022 15:13:15.142 資訊 [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextInitialized()
28-Jan-2022 15:13:15.142 資訊 [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextInitialized()
28-Jan-2022 15:13:15.144 資訊 [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: attributeAdded('StockTicker', 'async.Stockticker@c08850')
